{"version":3,"sources":["assets\\scripts\\Game.js"],"names":["cc","Class","Component","properties","newGroundPrefab","type","Prefab","redPointPrefab","stickPrefab","ground","Node","player","scoreDisplay","Label","gameoverDisplay","perfectDisplay","playerDestination","isMoving","touchStart","touchEnd","collision","stick","newGround","beyond","startPosition","onLoad","enabled","spawnStick","spawnNewGround","score","onEnable","node","once","EventType","TOUCH_START","onTouchStart","TOUCH_END","onTouchEnd","calculateCollision","successAction","failAction","setScore","string","startCollisionPoint","x","width","endCollisionPoint","startCollisionRedPoint","data","endCollisionRedPoint","destination","height","isCollision","isPerfect","perfect","getTime","distance","speed","playerMoveTime","stickComebackTime","comebackTime","tween","delay","to","angle","call","position","v2","y","start","destroy","active","by","director","loadScene","randomInteger","min","max","rand","Math","random","floor","spawnRedPoint","instantiate","newStick","addChild","anchorY","getComponent","game","newRedPoint","minWidthNewGround","maxWidthNewGround","newGroundPos","getNewGroundPosition","time","newGroundWidth","groundY","minX","maxX","randX"],"mappings":"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","sourceRoot":"/","sourcesContent":["/* eslint-disable no-undef */\ncc.Class({\n  extends: cc.Component,\n\n  properties: {\n    newGroundPrefab: {\n      default: null,\n      type: cc.Prefab,\n    },\n\n    redPointPrefab: {\n      default: null,\n      type: cc.Prefab,\n    },\n\n    stickPrefab: {\n      default: null,\n      type: cc.Prefab,\n    },\n\n    ground: {\n      default: null,\n      type: cc.Node,\n    },\n\n    player: {\n      default: null,\n      type: cc.Node,\n    },\n    scoreDisplay: {\n      default: null,\n      type: cc.Label,\n    },\n    gameoverDisplay: {\n      default: null,\n      type: cc.Label,\n    },\n    perfectDisplay: {\n      default: null,\n      type: cc.Label,\n    },\n    playerDestination: 'none',\n    isMoving: false,\n    touchStart: false,\n    touchEnd: false,\n    collision: false,\n    stick: null,\n    newGround: null,\n    beyond: -500,\n    startPosition: -300,\n  },\n\n  onLoad() {\n    this.gameoverDisplay.enabled = false;\n    this.perfectDisplay.enabled = false;\n    this.stick = this.spawnStick();\n    this.newGround = this.spawnNewGround();\n    this.score = 0;\n  },\n\n  onEnable() {\n    this.node.once(cc.Node.EventType.TOUCH_START, this.onTouchStart, this);\n    this.node.once(cc.Node.EventType.TOUCH_END, this.onTouchEnd, this);\n  },\n\n\n  onTouchStart() {\n    this.touchStart = true;\n    this.touchEnd = false;\n  },\n\n\n  onTouchEnd() {\n    this.touchStart = false;\n    this.touchEnd = true;\n    if (this.calculateCollision()) {\n      this.successAction();\n    } else {\n      this.failAction();\n    }\n  },\n\n  setScore() {\n    this.scoreDisplay.string = `Score: ${this.score}`;\n  },\n\n  calculateCollision() {\n    const startCollisionPoint = this.newGround.x - this.newGround.width / 2;\n    const endCollisionPoint = this.newGround.x + this.newGround.width / 2;\n    const startCollisionRedPoint = this.newGround.x - this.redPointPrefab.data.width / 2;\n    const endCollisionRedPoint = this.newGround.x + this.redPointPrefab.data.width / 2;\n    const destination = this.stick.x + this.stick.height;\n    const isCollision = destination >= startCollisionPoint && destination <= endCollisionPoint;\n    const isPerfect = destination >= startCollisionRedPoint && destination <= endCollisionRedPoint;\n    if (isCollision && !isPerfect) {\n      this.score += 1;\n    } else if (isPerfect) {\n      this.score += 2;\n      this.perfect = true;\n    }\n    return isCollision;\n  },\n\n  getTime(distance, speed = 500) {\n    return distance / speed;\n  },\n\n  successAction() {\n    const playerMoveTime = this.getTime(this.playerDestination - this.player.x);\n    const stickComebackTime = this.getTime(\n      (this.newGround.x - this.stick.x) + this.newGround.width / 2,\n    );\n    const comebackTime = this.getTime(this.newGround.x - this.startPosition);\n    cc.tween(this.stick).delay(0.3).to(0.4, { angle: -90 })\n      .call(() => {\n        this.perfectDisplay.enabled = this.perfect;\n        cc.tween(this.player).to(playerMoveTime,\n          { position: cc.v2(this.playerDestination, this.stick.y) })\n          .call(() => {\n            this.perfect = false;\n            this.perfectDisplay.enabled = false;\n            cc.tween(this.newGround)\n              .to(comebackTime, { position: cc.v2(this.startPosition, this.ground.y) })\n              .start();\n          })\n          .call(() => {\n            cc.tween(this.player)\n              .to(comebackTime, {\n                position: cc.v2(\n                  (this.startPosition + this.newGround.width / 2) - 20, this.stick.y,\n                ),\n              })\n              .start();\n          })\n          .call(() => {\n            cc.tween(this.stick)\n              .to(stickComebackTime,\n                {\n                  position: cc.v2(\n                    this.stick.x - (this.newGround.x - this.stick.x + this.newGround.width / 2\n                    ),\n                    this.stick.y,\n                  ),\n                })\n              .start();\n          })\n          .call(() => {\n            cc.tween(this.ground)\n              .to(comebackTime, { position: cc.v2(-800, this.ground.y) })\n              .call(() => {\n                this.ground.destroy();\n                this.ground = this.newGround;\n                this.stick.active = false;\n                this.stick = this.spawnStick();\n                this.newGround = this.spawnNewGround();\n                this.node.once(cc.Node.EventType.TOUCH_START, this.onTouchStart, this);\n                this.node.once(cc.Node.EventType.TOUCH_END, this.onTouchEnd, this);\n              }).start();\n          })\n          .start();\n      })\n      .call(() => this.setScore())\n      .start()\n      .start();\n  },\n\n  failAction() {\n    const playerMoveTime = this.getTime(this.stick.height);\n    cc.tween(this.stick).delay(0.3).to(0.4, { angle: -90 })\n      .call(() => {\n        cc.tween(this.player)\n          .to(playerMoveTime, { position: cc.v2(this.player.x + this.stick.height, this.stick.y) })\n          .call(() => { cc.tween(this.stick).to(0.4, { angle: -180 }).start(); })\n          .call(() => {\n            cc.tween(this.player).by(0.3, { position: cc.v2(0, -350) })\n              .call(() => { this.gameoverDisplay.enabled = true; })\n              .delay(1)\n              .call(() => cc.director.loadScene('game'))\n              .start();\n          })\n          .start();\n      })\n      .start();\n  },\n\n  randomInteger(min, max) {\n    const rand = min + Math.random() * (max + 1 - min);\n    return Math.floor(rand);\n  },\n\n  spawnRedPoint() {\n    return cc.instantiate(this.redPointPrefab);\n  },\n\n  spawnStick() {\n    const newStick = cc.instantiate(this.stickPrefab);\n    this.node.addChild(newStick);\n    newStick.anchorY = 0;\n    newStick.y = this.ground.y + this.ground.height / 2;\n    newStick.x = this.startPosition + this.ground.width / 2;\n    newStick.getComponent('Stick').game = this;\n    return newStick;\n  },\n\n  spawnNewGround() {\n    const newGround = cc.instantiate(this.newGroundPrefab);\n    newGround.x = 500;\n    newGround.y = this.ground.y;\n    this.node.addChild(newGround);\n    const newRedPoint = this.spawnRedPoint();\n    newGround.addChild(newRedPoint);\n    newRedPoint.y = this.ground.height / 2 - newRedPoint.height / 2;\n    const minWidthNewGround = 30;\n    const maxWidthNewGround = 150;\n    const newGroundPos = this.getNewGroundPosition(newGround.width);\n    newGround.width = this.randomInteger(minWidthNewGround, maxWidthNewGround);\n    this.playerDestination = (newGroundPos.x + newGround.width / 2) - 20;\n    const time = this.getTime(newGround.x - newGroundPos.x, 1000);\n    cc.tween(newGround).to(time, { position: newGroundPos }).start();\n    return newGround;\n  },\n\n\n  getNewGroundPosition(newGroundWidth) {\n    const groundY = this.ground.y;\n    const minX = -(this.node.width / 2) + 150 + (newGroundWidth / 2) + 5;\n    const maxX = (this.node.width / 2) - (newGroundWidth / 2);\n    const randX = this.randomInteger(minX, maxX);\n    return cc.v2(randX, groundY);\n  },\n\n});\n"]}