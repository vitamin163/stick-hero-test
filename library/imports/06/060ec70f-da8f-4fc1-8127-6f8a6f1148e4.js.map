{"version":3,"sources":["assets\\scripts\\Game.js"],"names":["cc","Class","Component","properties","newGroundPrefab","type","Prefab","redPointPrefab","stickPrefab","ground","Node","player","scoreDisplay","Label","playerDestination","isMoving","touchStart","touchEnd","collision","stick","newGround","beyond","startPosition","onLoad","spawnStick","spawnNewGround","getComponent","game","score","onEnable","node","once","EventType","TOUCH_START","onTouchStart","TOUCH_END","onTouchEnd","calculateCollision","successAction","failAction","setScore","string","startCollisionPoint","x","width","endCollisionPoint","startCollisionRedPoint","data","endCollisionRedPoint","destination","height","isCollision","isPerfect","getTime","distance","speed","playerMoveTime","stickComebackTime","comebackTime","tween","delay","to","angle","call","position","v2","y","start","destroy","active","by","director","loadScene","randomInteger","min","max","rand","Math","random","floor","spawnRedPoint","instantiate","newStick","addChild","anchorY","newRedPoint","minWidthNewGround","maxWidthNewGround","newGroundPos","getNewGroundPosition","time","newGroundWidth","groundY","minX","maxX","randX","update","dt"],"mappings":"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","sourceRoot":"/","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        newGroundPrefab: {\r\n            default: null,\r\n            type: cc.Prefab\r\n        },\r\n\r\n        redPointPrefab: {\r\n            default: null,\r\n            type: cc.Prefab\r\n        },\r\n\r\n        stickPrefab: {\r\n            default: null,\r\n            type: cc.Prefab\r\n        },\r\n\r\n        ground: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n\r\n        player: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        scoreDisplay: {\r\n            default: null,\r\n            type: cc.Label\r\n        },\r\n        playerDestination: 'none',\r\n        isMoving: false,\r\n        touchStart: false,\r\n        touchEnd: false,\r\n        collision: false,\r\n        stick: null,\r\n        newGround: null,\r\n        beyond: -500,\r\n        startPosition: -300,\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad() {\r\n        this.stick = this.spawnStick();\r\n        this.newGround = this.spawnNewGround();\r\n        this.player.getComponent('Player').game = this;\r\n        this.score = 0;\r\n    },\r\n\r\n    onEnable() {\r\n        this.node.once(cc.Node.EventType.TOUCH_START, this.onTouchStart, this);\r\n        this.node.once(cc.Node.EventType.TOUCH_END, this.onTouchEnd, this);\r\n    },\r\n\r\n\r\n    onTouchStart() {\r\n        this.touchStart = true;\r\n        this.touchEnd = false;\r\n    },\r\n\r\n\r\n    onTouchEnd() {\r\n        this.touchStart = false;\r\n        this.touchEnd = true;\r\n        if (this.calculateCollision()) {\r\n            this.successAction();\r\n        } else {\r\n            this.failAction();\r\n        }\r\n\r\n    },\r\n\r\n    setScore: function () {\r\n        this.scoreDisplay.string = 'Score: ' + this.score;\r\n    },\r\n\r\n    calculateCollision() {\r\n        const startCollisionPoint = this.newGround.x - this.newGround.width / 2;\r\n        const endCollisionPoint = this.newGround.x + this.newGround.width / 2;\r\n        const startCollisionRedPoint = this.newGround.x - this.redPointPrefab.data.width / 2;\r\n        const endCollisionRedPoint = this.newGround.x + this.redPointPrefab.data.width / 2;\r\n        const destination = this.stick.x + this.stick.height;\r\n        const isCollision = destination >= startCollisionPoint && destination <= endCollisionPoint;\r\n        const isPerfect = destination >= startCollisionRedPoint && destination <= endCollisionRedPoint;\r\n        if (isCollision && !isPerfect) {\r\n            this.score += 1;\r\n        } else if (isPerfect) {\r\n            this.score += 2;\r\n        }\r\n        return isCollision;\r\n    },\r\n\r\n    getTime(distance, speed = 500) {\r\n        return distance / speed;\r\n    },\r\n\r\n    successAction() {\r\n        const playerMoveTime = this.getTime(this.playerDestination - this.player.x);\r\n        const stickComebackTime = this.getTime((this.newGround.x - this.stick.x) + this.newGround.width / 2);\r\n        const comebackTime = this.getTime(this.newGround.x - this.startPosition);\r\n        cc.tween(this.stick).delay(0.3).to(0.4, { angle: -90 })\r\n            .call(() => {\r\n                cc.tween(this.player).to(playerMoveTime, { position: cc.v2(this.playerDestination, this.stick.y) })\r\n                    .call(() => {\r\n                        cc.tween(this.newGround)\r\n                            .to(comebackTime, { position: cc.v2(this.startPosition, this.ground.y) })\r\n                            .start()\r\n                    })\r\n                    .call(() => {\r\n                        cc.tween(this.player)\r\n                            .to(comebackTime, { position: cc.v2((this.startPosition + this.newGround.width / 2) - 20, this.stick.y) })\r\n                            .start()\r\n                    })\r\n                    .call(() => {\r\n                        cc.tween(this.stick)\r\n                            .to(stickComebackTime, { position: cc.v2(this.stick.x - (this.newGround.x - this.stick.x + this.newGround.width / 2), this.stick.y) })\r\n                            .start()\r\n                    })\r\n                    .call(() => {\r\n                        cc.tween(this.ground)\r\n                            .to(comebackTime, { position: cc.v2(-800, this.ground.y) })\r\n                            .call(() => this.ground.destroy())\r\n                            .call(() => this.ground = this.newGround)\r\n                            .call(() => {\r\n                                this.stick.active = false;\r\n                                this.stick = this.spawnStick();\r\n                                this.newGround = this.spawnNewGround();\r\n                                this.node.once(cc.Node.EventType.TOUCH_START, this.onTouchStart, this);\r\n                                this.node.once(cc.Node.EventType.TOUCH_END, this.onTouchEnd, this);\r\n                            })\r\n                            .start()\r\n                    })\r\n                    .start()\r\n            })\r\n            .call(() => this.setScore()).start()\r\n            .start();\r\n\r\n    },\r\n\r\n    failAction() {\r\n        const playerMoveTime = this.getTime(this.stick.height);\r\n        cc.tween(this.stick).delay(0.3).to(0.4, { angle: -90 })\r\n            .call(() => {\r\n                cc.tween(this.player).to(playerMoveTime, { position: cc.v2(this.player.x + this.stick.height, this.stick.y) })\r\n                    .call(() => { cc.tween(this.stick).to(0.4, { angle: -180 }).start() })\r\n                    .call(() => {\r\n                        cc.tween(this.player).by(0.3, { position: cc.v2(0, -350) })\r\n                            .delay(1).call(() => cc.director.loadScene('game')).start()\r\n                    })\r\n\r\n                    .start()\r\n            })\r\n            .start();\r\n    },\r\n\r\n    randomInteger(min, max) {\r\n        const rand = min + Math.random() * (max + 1 - min);\r\n        return Math.floor(rand);\r\n    },\r\n\r\n    spawnRedPoint() {\r\n        return cc.instantiate(this.redPointPrefab);\r\n    },\r\n\r\n    spawnStick() {\r\n        const newStick = cc.instantiate(this.stickPrefab);\r\n        this.node.addChild(newStick);\r\n        newStick.anchorY = 0;\r\n        newStick.y = this.ground.y + this.ground.height / 2;\r\n        newStick.x = this.startPosition + this.ground.width / 2;\r\n        newStick.getComponent('Stick').game = this;\r\n        return newStick;\r\n    },\r\n\r\n    spawnNewGround() {\r\n        const newGround = cc.instantiate(this.newGroundPrefab);\r\n        newGround.x = 500;\r\n        newGround.y = this.ground.y;\r\n        this.node.addChild(newGround);\r\n        const newRedPoint = this.spawnRedPoint();\r\n        newGround.addChild(newRedPoint);\r\n        newRedPoint.y = this.ground.height / 2 - newRedPoint.height / 2;\r\n        const minWidthNewGround = 30;\r\n        const maxWidthNewGround = 150;\r\n        const newGroundPos = this.getNewGroundPosition(newGround.width);\r\n        newGround.width = this.randomInteger(minWidthNewGround, maxWidthNewGround);\r\n        this.playerDestination = (newGroundPos.x + newGround.width / 2) - 20;\r\n        const time = this.getTime(newGround.x - newGroundPos.x, 1000);\r\n        cc.tween(newGround).to(time, { position: newGroundPos }).start()\r\n        return newGround;\r\n    },\r\n\r\n\r\n    getNewGroundPosition(newGroundWidth) {\r\n        const groundY = this.ground.y;\r\n        const minX = -(this.node.width / 2) + 150 + (newGroundWidth / 2) + 5;\r\n        const maxX = (this.node.width / 2) - (newGroundWidth / 2);\r\n        const randX = this.randomInteger(minX, maxX);\r\n        return cc.v2(randX, groundY);\r\n    },\r\n\r\n\r\n\r\n    start() {\r\n\r\n    },\r\n\r\n    update(dt) {\r\n\r\n    },\r\n});\r\n"]}